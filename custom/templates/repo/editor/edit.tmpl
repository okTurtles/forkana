{{template "base/head" .}}
<div role="main" aria-label="{{.Title}}" class="page-content repository file editor edit">
	{{if and .IsCreatingFirstArticle .IsSigned}}
    <div class="ui success message tw-mt-0">
        <div class="tw-flex tw-items-center tw-gap-2">
            {{svg "octicon-check-circle" 16}}
            <span class="ui text black">{{ctx.Locale.Tr "repo.editor.first_article_message"}}</span>
        </div>
    </div>
    {{end}}
	{{template "repo/header" .}}
	<div class="ui container">
		{{template "base/alert" .}}
		<form {{if .IsCreatingFirstArticle}}id="first-article-form"{{end}} class="ui edit form form-fetch-action" method="post" action="{{.CommitFormOptions.TargetFormAction}}"
					data-text-empty-confirm-header="{{ctx.Locale.Tr "repo.editor.commit_empty_file_header"}}"
					data-text-empty-confirm-content="{{ctx.Locale.Tr "repo.editor.commit_empty_file_text"}}"
		>
			{{.CsrfTokenHtml}}
			{{template "repo/editor/common_top" .}}
				{{if .IsCreatingFirstArticle}}
					{{template "repo/editor/first_article_header" .}}
				{{else}}
					<div class="repo-editor-header">
					{{template "repo/editor/common_breadcrumb" .}}
					</div>
				{{end}}
			{{if not .NotEditableReason}}
				<div class="field">
					<div class="tw-p-0">
						<textarea id="edit_area" name="content" class="tw-hidden" data-id="repo-{{.Repository.Name}}-{{.TreePath}}"
							data-previewable-extensions="{{.PreviewableExtensions}}"
							data-line-wrap-extensions="{{.LineWrapExtensions}}">{{.FileContent}}</textarea>
						<div class="editor-loading is-loading"></div>
						<div id="toast-editor-container" style="min-height: 500px;"></div>
					</div>
				</div>
			{{else}}
				<div class="field">
					<div class="ui segment tw-text-center">
						<h4 class="tw-font-semibold tw-mb-2">{{.NotEditableReason}}</h4>
						<p>{{ctx.Locale.Tr "repo.editor.file_not_editable_hint"}}</p>
					</div>
				</div>
			{{end}}
			{{if .IsCreatingFirstArticle}}
				{{template "repo/editor/first_article_commit_form" .}}
			{{else}}
				{{template "repo/editor/commit_form" .}}
			{{end}}
		</form>
	</div>
</div>
{{template "base/footer" .}}
